angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective);
function uiCodemirrorDirective(g,h){function i(b,a,c,d){var e=angular.extend({value:a.text()},h.codemirror||{},b.$eval(c.uiCodemirror),b.$eval(c.uiCodemirrorOpts)),f=j(a,e);k(f,c.uiCodemirror||c.uiCodemirrorOpts,b);l(f,d,b);m(f,c.uiRefresh,b);b.$on("CodeMirror",function(b,a){if(angular.isFunction(a))a(f);else throw Error("the CodeMirror event requires a callback function");});if(angular.isFunction(e.onLoad))e.onLoad(f)}function j(b,a){var c;b[0].tagName==="TEXTAREA"?c=window.CodeMirror.fromTextArea(b[0],
a):(b.html(""),c=new window.CodeMirror(function(a){b.append(a)},a));return c}function k(b,a,c){if(a){var d=Object.keys(window.CodeMirror.defaults);c.$watch(a,function(a,c){angular.isObject(a)&&d.forEach(function(d){a.hasOwnProperty(d)&&!(c&&a[d]===c[d])&&b.setOption(d,a[d])})},!0)}}function l(b,a,c){if(a)a.$formatters.push(function(a){if(angular.isUndefined(a)||a===null)return"";else if(angular.isObject(a)||angular.isArray(a))throw Error("ui-codemirror cannot use an object or an array as a model");
return a}),a.$render=function(){b.setValue(a.$viewValue||"")},b.on("change",function(b){var e=b.getValue();e!==a.$viewValue&&c.$evalAsync(function(){a.$setViewValue(e)})})}function m(b,a,c){a&&c.$watch(a,function(a,c){a!==c&&g(function(){b.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw Error("ui-codemirror needs CodeMirror to work... (o rly?)");return i}}}uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"];
